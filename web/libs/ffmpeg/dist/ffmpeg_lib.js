var ffmpeg_js;(()=>{var e={662:(e,t,r)=>{const a=r(594);e.exports.ffmpeg_module=a,e.exports={convertVideo:(e,t)=>a.convertVideo(e,t),convertAudio:(e,t)=>a.convertAudio(e,t)}},594:(e,t,r)=>{"use strict";var a;r.r(t),r.d(t,{convertAudio:()=>h,convertVideo:()=>E}),function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"}(a||(a={}));const s=(()=>{let e=0;return()=>e++})(),o=(new Error("unknown message type"),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first")),n=new Error("called FFmpeg.terminate()");new Error("failed to import ffmpeg-core.js");const i=new Error("failed to get response body reader"),l=new Error("failed to complete download"),c=async e=>{let t;if("string"==typeof e)t=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0))):await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else{if(!(e instanceof File||e instanceof Blob))return new Uint8Array;t=await(r=e,new Promise(((e,t)=>{const a=new FileReader;a.onload=()=>{const{result:t}=a;t instanceof ArrayBuffer?e(new Uint8Array(t)):e(new Uint8Array)},a.onerror=e=>{t(Error(`File could not be read! Code=${e?.target?.error?.code||-1}`))},a.readAsArrayBuffer(r)})))}var r;return new Uint8Array(t)},d=async(e,t,r=!1,a)=>{const s=r?await(async(e,t)=>{const r=await fetch(e);let a;try{const s=parseInt(r.headers.get("Content-Length")||"-1"),o=r.body?.getReader();if(!o)throw i;const n=[];let c=0;for(;;){const{done:r,value:a}=await o.read(),i=a?a.length:0;if(r){if(-1!=s&&s!==c)throw l;t&&t({url:e,total:s,received:c,delta:i,done:r});break}n.push(a),c+=i,t&&t({url:e,total:s,received:c,delta:i,done:r})}const d=new Uint8Array(c);let f=0;for(const e of n)d.set(e,f),f+=e.length;a=d.buffer}catch(s){console.log("failed to send download progress event: ",s),a=await r.arrayBuffer(),t&&t({url:e,total:a.byteLength,received:a.byteLength,delta:0,done:!0})}return a})(e,a):await(await fetch(e)).arrayBuffer(),o=new Blob([s],{type:t});return URL.createObjectURL(o)},f=new class{#e=null;#t={};#r={};#a=[];#s=[];loaded=!1;#o=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:t,data:r}})=>{switch(t){case a.LOAD:this.loaded=!0,this.#t[e](r);break;case a.MOUNT:case a.UNMOUNT:case a.EXEC:case a.WRITE_FILE:case a.READ_FILE:case a.DELETE_FILE:case a.RENAME:case a.CREATE_DIR:case a.LIST_DIR:case a.DELETE_DIR:this.#t[e](r);break;case a.LOG:this.#a.forEach((e=>e(r)));break;case a.PROGRESS:this.#s.forEach((e=>e(r)));break;case a.ERROR:this.#r[e](r)}delete this.#t[e],delete this.#r[e]})};#n=({type:e,data:t},r=[],a)=>this.#e?new Promise(((o,n)=>{const i=s();this.#e&&this.#e.postMessage({id:i,type:e,data:t},r),this.#t[i]=o,this.#r[i]=n,a?.addEventListener("abort",(()=>{n(new DOMException(`Message # ${i} was aborted`,"AbortError"))}),{once:!0})})):Promise.reject(o);on(e,t){"log"===e?this.#a.push(t):"progress"===e&&this.#s.push(t)}off(e,t){"log"===e?this.#a=this.#a.filter((e=>e!==t)):"progress"===e&&(this.#s=this.#s.filter((e=>e!==t)))}load=({classWorkerURL:e,...t}={},{signal:s}={})=>(this.#e||(this.#e=e?new Worker(new URL(e,"file:///Users/dima/StudioProjects/dlg-one-clients/web/libs/ffmpeg/node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js"),{type:"module"}):new Worker(new URL(r.p+r.u(439),r.b),{type:void 0}),this.#o()),this.#n({type:a.LOAD,data:t},void 0,s));exec=(e,t=-1,{signal:r}={})=>this.#n({type:a.EXEC,data:{args:e,timeout:t}},void 0,r);terminate=()=>{const e=Object.keys(this.#r);for(const t of e)this.#r[t](n),delete this.#r[t],delete this.#t[t];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,t,{signal:r}={})=>{const s=[];return t instanceof Uint8Array&&s.push(t.buffer),this.#n({type:a.WRITE_FILE,data:{path:e,data:t}},s,r)};mount=(e,t,r)=>this.#n({type:a.MOUNT,data:{fsType:e,options:t,mountPoint:r}},[]);unmount=e=>this.#n({type:a.UNMOUNT,data:{mountPoint:e}},[]);readFile=(e,t="binary",{signal:r}={})=>this.#n({type:a.READ_FILE,data:{path:e,encoding:t}},void 0,r);deleteFile=(e,{signal:t}={})=>this.#n({type:a.DELETE_FILE,data:{path:e}},void 0,t);rename=(e,t,{signal:r}={})=>this.#n({type:a.RENAME,data:{oldPath:e,newPath:t}},void 0,r);createDir=(e,{signal:t}={})=>this.#n({type:a.CREATE_DIR,data:{path:e}},void 0,t);listDir=(e,{signal:t}={})=>this.#n({type:a.LIST_DIR,data:{path:e}},void 0,t);deleteDir=(e,{signal:t}={})=>this.#n({type:a.DELETE_DIR,data:{path:e}},void 0,t)};var p=!1;async function E(e,t){const r="output.mp4",a=["-i",t,"-profile:v","high","-c:v","libx264","-preset","ultrafast","-crf","36","-map","0","-movflags","faststart",r];return await u(e,t,r,a)}async function h(e,t){const r="output.mp3",a=["-i",t,"-c:a","libmp3lame",r];return await u(e,t,r,a)}async function u(e,t,r,a){if(!p)return null;const s=new Blob([e]);return await f.writeFile(t,await c(s)),0!=await f.exec(a)?null:(await f.readFile(r)).buffer}(async()=>{const e="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd";f.on("log",(({type:e,message:t})=>{console.log(e,t)})),p=await f.load({coreURL:await d(`${e}/ffmpeg-core.js`,"text/javascript"),wasmURL:await d(`${e}/ffmpeg-core.wasm`,"application/wasm")})})()}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.m=e,r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.u=e=>e+".ffmpeg_lib.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var s=a.length-1;s>-1&&!e;)e=a[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),r.b=document.baseURI||self.location.href;var a=r(662);ffmpeg_js=a})();